<!DOCTYPE html>
<html lang="de" ng-app="hueApp">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>Debug-Ansicht</title>

    <style>
        body {
            font-family:Sans-serif;
        }

        h1 {
            border-bottom:1px solid #333;
        }
    </style>

	<script src="/js/angular.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/js/app.js"></script>
	
</head>
<body ng-controller="MainCtrl">

<!-- socket -->

<h1>Socket.IO-Status</h1>

<p>in <code>state.socket</code></p>

<p><code>{{state.socket | json}}</code></p>

<p ng-show="!state.socket.connected && !state.socket.wasConnected">Baue Socket.IO-Verbindung auf...</p>
<p ng-show="!state.socket.connected && state.socket.wasConnected">Socket.IO-Verbindung unterbrochen!</p>

<!-- user -->

<h1>User</h1>

<p>in <code>state.user</code></p>

<p><code>{{state.user | json}}</code></p>

<form ng-submit="user.login()" ng-show="!state.user.login && state.user.loginPromptReceived">

    <p><b>Nicht eingeloggt!</b></p>

    <p>
        Passwort:
        <input type="text" ng-model="user.password" />
        <input type="submit" value="Login" />

        <span ng-show="state.user.loginWaiting">Überprüfe Passwort...</span>
        <span ng-show="state.user.loginError">Passwort falsch!</span>
    </p>
</form>

<p ng-show="state.user.loginRequired && state.user.login">
    <button ng-click="user.logout()">Logout</button>
</p>

<!-- connect -->

<h1>Verbindungen des NodeJS</h1>

<p>Status aller Verbindungen/Logins in <code>state.connect</code></p>

<p><code>{{state.connect | json}}</code></p>

<!-- lights -->

<h1>Lichter</h1>

<p>Status in <code>state.lights</code></p>

<div ng-repeat="(id, light) in state.lights">
    <h2>{{id}} - {{light.name}}</h2>

    <form ng-submit="lights.setName(id, light.name)">
        <input type="text" ng-model="light.name" />
        <input type="submit" value="umbenennen" />
    </form>

    <div ng-show="light.state.reachable">
        on: <input type="checkbox" ng-model="light.state.on" ng-change="lights.state(id, {'on': light.state.on})" /><br />

        <span ng-repeat="(val, name) in {'bri': 'Helligkeit (0-254)', 'hue': 'Farbe (0-65535)', 'sat': 'Sättigung (0-254)', 'ct': 'Weiß-Farbtemperatur (153-500)'}">
            {{name}} <code>[{{val}}]</code> <input type="number" ng-model="light.state[val]" ng-change="lights.stateAttribute(id, val, light.state[val])" /><br />
        </span>

        effect <select ng-model="light.state.effect" ng-change="lights.state(id, {'effect': light.state.effect})">
            <option>none</option>
            <option>colorloop</option>
        </select>
    </div>

    <div ng-show="!light.state.reachable">
        Lampe ausgeschaltet oder nicht in Reichweite
    </div>

</div>

<p>
    <button ng-click="lights.search()">Nach neuen Lampen suchen</button>
    <button ng-click="lights.stateAll({on: true})">Alle an</button>
    <button ng-click="lights.stateAll({on: false})">Alle aus</button>
</p>

<!--
<h1>Scenes</h1>


<div ng-repeat="scene in state.scenes">
    <h2>{{scene._id}} - {{scene.name}}</h2>


    <div ng-repeat="light in scene.lights">
        <h4>{{light.light}} - {{state.lights[light.light].name}}</h4>

        on: <input type="checkbox" ng-model="light.state.on" />

        <span ng-repeat="val in ['bri', 'hue', 'sat', 'ct']">
            {{val}} <input type="number" ng-model="light.state[val]" />
        </span>

        effect <select ng-model="light.state.effect">
            <option>none</option>
            <option>colorloop</option>
        </select>
    </div>
</div>
-->


<!-- complete state -->

<h1>Kompletter state</h1>

<p><pre>{{state | json}}</pre></p>

</body>
</html>