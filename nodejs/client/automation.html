<!DOCTYPE html>
<html lang="de" ng-app="hueApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>SmartLights</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./css/redtheme.css"/>
    <link rel="stylesheet" href="./css/jquery.mobile.icons-1.4.0.css"/>
    <link rel="stylesheet" href="./css/jquery.mobile.structure-1.4.0.css"/>

    <link type="text/css" rel="stylesheet" href="./css/layout.css"/>

    <!-- JavaScript -->
    <script src="./js/scripts/jquery-1.10.2.js"></script>
    <script src="./js/scripts/jquery.mobile-1.4.0.js"></script>
    <script src="./js/scripts/angular-1.3.0-beta.js"></script>
    <script src="./js/scripts/angular-route.js"></script>
    <script src="./js/scripts/jqm-angular-adapter-modified.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <!-- Controller -->
    <script src="./js/app.js"></script>
    <script src="./js/controllers.js"></script>
    <script src="./js/filters.js"></script>
    <script src="./js/services.js"></script>
    <script src="./js/directives.js"></script>
    <script src="./js/controllers/lightandgroupctrl.js"></script>
    <script src="./js/controllers/partyctrl.js"></script>
    <script src="./js/controllers/scenectrl.js"></script>
    <script src="./js/controllers/speechctrl.js"></script>
    <script src="./js/controllers/automationctrl.js"></script>


    <!-- Favicon and Touch-Icons -->
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="apple-touch-icon-precomposed" sizes="152x152"
          href="css/images/touch/152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120"
          href="css/images/touch/120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76"
          href="css/images/touch/76.png" />
    <link rel="apple-touch-icon-precomposed"
          href="css/images/touch/57.png" />

    <meta name="msapplication-TileImage"
          content="css/images/touch/256.png" />
    <meta name="msapplication-TileColor" content="#141414" />

</head>
<body>

<div data-role="page" ngm-shared-controller="sharedScope:MainCtrl"  class="background_stars" data-theme="b">
    <!-- HEADER -->
    <div data-role="header" class="header">
        <div class="header_container tablet_hide">
            <div class="logout_icon icon_left icon_40px" ng-show="sharedScope.state.user.loginRequired" ng-click="sharedScope.user.logout()"></div>
            <h1 class="ui-title">Smart Lights</h1>
        </div>
        <!---------------------------------------- MOBILE MAINMENU ---------------------------------------------------->
        <div class="tablet_show mobile_menu_wrapper header_container">
            <a href="lightandgroup.html" class="smallmenu_wrapper">
                <div class="light_icon icon_40px" style="margin:0px"></div>
            </a>
            <a href="scenes.html" class="smallmenu_wrapper">
                <div class="scene_icon icon_40px" style="margin:0px"></div>
            </a>
            <a href="automationoverview.html" class="smallmenu_wrapper">
                <div class="automation_dark_icon icon_40px" style="margin:0px"></div>
            </a>
            <a href="party.html" class="smallmenu_wrapper">
                <div class="party_icon icon_40px" style="margin:0px"></div>
            </a>
            <a href="settings.html" class="smallmenu_wrapper">
                <div class="settings_icon icon_40px" style="margin:0px"></div>
            </a>
        </div>
    </div>

    <!-- CONTENT -->
    <div data-role="content" ng-controller="AutomationCtrl" class="content_container">
        <!---------------------------------------- DESKTOP MENU ------------------------------------------------------->
        <div class="content_left_subcontainer tablet_hide">
            <a href="lightandgroup.html" class="ui-btn main_menu_transparent_bg button" style="margin-top: 0px">
                <div class="light_icon icon_40px icon_left"></div>
                <div class="main_menu_text panel">
                    Lights & Groups
                </div>
            </a>
            <a href="scenes.html" class="ui-btn main_menu_transparent_bg button">
                <div class="scene_icon icon_40px icon_left"></div>
                <div class="main_menu_text panel">
                    Scenes
                </div>
            </a>
            <a href="automationoverview.html" class="ui-btn main_menu_transparent_bg button checked_menubox">
                <div class="automation_icon icon_40px icon_left"></div>
                <div class="main_menu_text panel">
                    Automation
                </div>
            </a>
            <a href="party.html" class="ui-btn main_menu_transparent_bg button">
                <div class="party_icon icon_40px icon_left"></div>
                <div class="main_menu_text panel">
                    Party
                </div>
            </a>
            <a href="account.html" class="ui-btn main_menu_transparent_bg button">
                <div class="settings_icon icon_40px icon_left" style="padding: 0px"></div>
                <div class="main_menu_text panel">Settings</div>
            </a>
        </div>

        <!---------------------------------------- NOTIFICATIONS ------------------------------------------------------>
        <a href="rfid.html" class="notification" ng-if="sharedScope.rfid.unknownRfid">
            <div class="warning_icon icon_32px icon_left"></div>
            New RFID-Tag available.
        </a>
        <div class="notification" ng-if="sharedScope.submenu.visible.notificationValueIncomplete"
             ng-click="sharedScope.submenu.closeSubmenu()">
            <div class="warning_icon icon_32px icon_left"></div>
            Wrong data input. <br /> Please try again.
        </div>



        <div class="content_right_subcontainer" style="text-align: center; margin: auto; overflow:hidden">

            <div class="subcontent_a">
                <!---------------------------------------- NAME ------------------------------------------------------->
                <div class="lightgroup_name_edit" ng-if="state.automation[helpers.urlId].name.length">
                    <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-edit ui-btn-icon-notext ui-btn-inline"
                          ng-click="automation.update(state.automation[helpers.urlId])"></span>
                </div>
                <div class="lightgroup_name_input"><input type="text" ng-model="state.automation[helpers.urlId].name"></div>

                <!---------------------------------------- CHECKBOX MENU: Active, single use, all conditions needed --->
                <div class="automation_checkboxlist_container">
                    <div style="overflow:hidden">

                        <div class="checkbox_container vertical_checkbox_list automation_checkboxlist" style="float:left; width:25%"
                             ng-click="automation.toggleActive(helpers.urlId)">
                            <div class="checkbox_box">
                                <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].active">
                            </div>
                            <div style="margin-left: 30px">Active</div>
                        </div>

                        <div class="checkbox_container vertical_checkbox_list automation_checkboxlist" style="float:right;width:25%"
                             ng-click="automation.toggleSingle(helpers.urlId)">
                            <div class="checkbox_box">
                                <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].single">
                            </div>
                            <div style="margin-left: 30px">Single Use</div>
                        </div>

                        <div class="checkbox_container vertical_checkbox_list automation_checkboxlist" style="text-align: center; margin: auto;width:40%"
                             ng-click="automation.toggleAllConditionsNeeded(helpers.urlId)">
                            <div class="checkbox_box">
                                <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].allConditionsNeeded">
                            </div>
                            <div style="margin-left: 30px">All Conditions Needed</div>
                        </div>

                    </div>
                </div>
            </div>



            <!---------------------------------------- TRIGGER, CONDITIONS, ACTIONS LIST ------------------------------>
            <div class="subcontent_b">
                <div class="transparent_bg listing_box" style="overflow: hidden">
                    <!-------------------------------- TRIGGER List --------------------------------------------------->
                    <div class="automation_triggerconditionsactions" style="margin-top: 0px">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon position_plus_icon" ng-click="automation.setSelectedAutomationId(helpers.urlId);
                            automation.resetSelectedProperty('trigger');sharedScope.submenu.openSubmenu(['trigger', 'createTrigger'])"></span>
                        <h2 class="listing_box_title">Trigger</h2>

                        <div ng-repeat="trigger in state.automation[helpers.urlId].triggers"
                             ng-click="automation.initializeProperty(['trigger', 'editTrigger'], $index, trigger.type.toString(), trigger.value)">
                            <div ng-switch="trigger.type">
                                <div ng-switch-when="light" class="automation_tca_list">
                                    <div class="light_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Threshold&nbsp;&nbsp;&nbsp;  {{trigger.value.relation}}&nbsp;&nbsp;{{trigger.value.threshold}}
                                    </div>
                                </div>
                                <div ng-switch-when="motion" class="automation_tca_list">
                                    <div class="motion_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Motion Sensibility
                                    </div>
                                </div>
                                <div ng-switch-when="speech" class="automation_tca_list">
                                    <div class="speech_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Speech Command&nbsp;&nbsp;&nbsp;"{{trigger.value}}"
                                    </div>
                                </div>
                                <div ng-switch-when="schedule" class="automation_tca_list">
                                    <div class="clock_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Alarm &nbsp;&nbsp;&nbsp;
                                        <div ng-if="trigger.value.hour < 10" style="display: inline-block; margin:0px">0</div>{{trigger.value.hour}}:<div ng-if="trigger.value.minute < 10" style="display: inline-block; margin:0px">0</div>{{trigger.value.minute}}

                                    </div>
                                </div>
                                <div ng-switch-when="periodical" class="automation_tca_list">
                                    <div class="periodical_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Every&nbsp;&nbsp;{{trigger.value}}&nbsp;&nbsp;Minutes
                                    </div>
                                </div>
                                <div ng-switch-when="rfid" class="automation_tca_list">
                                    <div class="rfid_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0);"
                                         ng-repeat="rfid in sharedScope.state.rfid" ng-if="trigger.value === rfid.tag">
                                        RFID&nbsp;&nbsp;&nbsp;{{rfid.name}}
                                    </div>
                                </div>
                                <div ng-switch-when="device" class="automation_tca_list">
                                    <div class="device_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0);"
                                         ng-repeat="device in sharedScope.state.devices" ng-if="trigger.value.address === device.address">
                                        <div style="display: inline-block" ng-if="trigger.value.action === 'login'">Login</div>
                                        <div style="display: inline-block" ng-if="trigger.value.action === 'logout'">Logout</div>
                                        &nbsp;of&nbsp;&nbsp;{{device.name}}
                                    </div>
                                </div>
                                <div ng-switch-when="custom" class="automation_tca_list">
                                    <div class="custom_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        Personal Command&nbsp;&nbsp;&nbsp;"{{trigger.value}}"
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-------------------------------- CONDITIONS List ------------------------------------------------>
                    <div class="automation_triggerconditionsactions">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus  ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon position_plus_icon" ng-click="automation.setSelectedAutomationId(helpers.urlId);
                            automation.resetSelectedProperty('condition');sharedScope.submenu.openSubmenu(['condition', 'createCondition'])"></span>
                        <h2 class="listing_box_title">Conditions</h2>

                        <div ng-repeat="condition in state.automation[helpers.urlId].conditions"
                             ng-click="automation.initializeProperty(['condition', 'editCondition'], $index, condition.type.toString(), condition.value)">
                            <div ng-switch="condition.type">
                                <div ng-switch-when="light" class="automation_tca_list">
                                    <div class="light_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        Threshold&nbsp;&nbsp;&nbsp;  {{condition.value.relation}}&nbsp;&nbsp;{{condition.value.threshold}}
                                    </div>
                                </div>
                                <div ng-switch-when="motion" class="automation_tca_list">
                                    <div class="motion_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        Motion for&nbsp;&nbsp;&nbsp;  {{condition.value.relation}}&nbsp;&nbsp;{{condition.value.time}} sec.
                                    </div>
                                </div>
                                <div ng-switch-when="time" class="automation_tca_list">
                                    <div class="clock_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0)">
                                        <div style="display: inline-block" ng-if="condition.value.relation === '<'">Before</div>
                                        <div style="display: inline-block" ng-if="condition.value.relation === '>'">After</div>
                                        &nbsp;
                                        <div ng-if="condition.value.hour < 10" style="display: inline-block; margin:0px">0</div>{{condition.value.hour}}:<div ng-if="condition.value.minute < 10" style="display: inline-block; margin:0px">0</div>{{condition.value.minute}}
                                        &nbsp;o'Clock
                                    </div>
                                </div>
                                <div ng-switch-when="weekdays" class="automation_tca_list">
                                    <div class="schedule_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        <div ng-if="condition.value.indexOf(0) > -1" style="display: inline-block">Su&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(1) > -1" style="display: inline-block">Mo&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(2) > -1" style="display: inline-block">Tu&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(3) > -1" style="display: inline-block">We&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(4) > -1" style="display: inline-block">Th&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(5) > -1" style="display: inline-block">Fr&nbsp;</div>
                                        <div ng-if="condition.value.indexOf(6) > -1" style="display: inline-block">Sa</div>
                                    </div>

                                </div>
                                <div ng-switch-when="connections" class="automation_tca_list">
                                    <div class="connections_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        Connection
                                        <div ng-if="condition.value === true" style="display: inline-block">available.</div>
                                        <div ng-if="condition.value === false" style="display: inline-block">not available.</div>
                                    </div>
                                </div>
                                <div ng-switch-when="rfid" class="automation_tca_list">
                                    <div class="rfid_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0);"
                                         ng-repeat="rfid in sharedScope.state.rfid" ng-if="condition.value.id === rfid.tag">
                                        RFID&nbsp;&nbsp;&nbsp;&nbsp;{{rfid.name}}&nbsp;&nbsp;{{condition.value.relation}}&nbsp;&nbsp;{{condition.value.time}}&nbsp;sec.
                                    </div>
                                </div>
                                <div ng-switch-when="device" class="automation_tca_list">
                                    <div class="device_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix" style="background-color: rgba(236, 236, 236, 0);"
                                         ng-repeat="device in sharedScope.state.devices" ng-if="condition.value.address === device.address">
                                        {{device.name}}:&nbsp;&nbsp;&nbsp;
                                        <div style="display: inline-block" ng-if="condition.value.active === true">Active</div>
                                        <div style="display: inline-block" ng-if="(condition.value.active === false) && (condition.value.relation === undefined)">Inactive</div>
                                        <div style="display: inline-block" ng-if="(condition.value.relation != undefined)">
                                            Last Activity&nbsp;&nbsp;{{condition.value.relation}}&nbsp;{{condition.value.time}} min. </div>
                                    </div>
                                </div>
                                <div ng-switch-when="state" class="automation_tca_list">
                                    <div ng-if="condition.value.type === 'light'">
                                        <img src="./css/images/icons/transparent-light-icon-40.png" class="light_group_img icon_40px"
                                             hueper-color="condition.value.state" style="border-radius: 40px; padding:0px">
                                        <div style="display: inline-block; margin-top: 10px">{{sharedScope.state.lights[condition.value.id].name}}
                                            <div ng-if="(condition.value.invert === true)" style="display: inline-block">&nbsp;&nbsp;[Inverted]</div>
                                        </div>
                                    </div>
                                    <div ng-if="condition.value.type === 'all'">
                                        <div class="automation_state_icon" hueper-color="condition.value.state"></div>
                                        <div style="display: inline-block; margin-top: 10px">All Lights
                                            <div ng-if="(condition.value.invert === true)" style="display: inline-block">&nbsp;&nbsp;[Inverted]</div>
                                        </div>
                                    </div>
                                    <div ng-if="condition.value.type === 'active'">
                                        <div class="automation_state_icon" hueper-color="condition.value.state"></div>
                                        <div style="display: inline-block; margin-top: 10px">Active Lights
                                            <div ng-if="(condition.value.invert === true)" style="display: inline-block">&nbsp;&nbsp;[Inverted]</div>
                                        </div>
                                    </div>
                                    <div ng-if="condition.value.type === 'group'">
                                        <img src="./css/images/icons/transparent-group-icon-40.png" class="light_group_img icon_40px"
                                             hueper-color="condition.value.state" style="border-radius: 40px; padding:0px">
                                        <div style="display: inline-block; margin-top: 10px">{{sharedScope.state.groups[condition.value.id].name}}
                                            <div ng-if="(condition.value.invert === true)" style="display: inline-block">&nbsp;&nbsp;[Inverted]</div>
                                        </div>
                                    </div>
                                    <div ng-if="condition.value.type === 'scene'">
                                        <div class="scene_icon icon_40px icon_left"></div>
                                        <div style="display: inline-block; margin-top: 10px">{{sharedScope.state.scenes[condition.value.id].name}}
                                            <div ng-if="(condition.value.invert === true)" style="display: inline-block">&nbsp;&nbsp;[Inverted]</div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="party" class="automation_tca_list">
                                    <div class="party_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        "{{sharedScope.state.party[condition.value.id].name}}"&nbsp;&nbsp;&nbsp;
                                        <div ng-if="(condition.value.invert === true)" style="display: inline-block">
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Inverted]
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-------------------------------- ACTIONS List --------------------------------------------------->
                    <div class="automation_triggerconditionsactions">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon position_plus_icon" ng-click="automation.setSelectedAutomationId(helpers.urlId);
                            automation.resetSelectedProperty('action');sharedScope.submenu.openSubmenu(['action', 'createAction'])"></span>
                        <h2 class="listing_box_title">Actions</h2>

                        <div ng-repeat="action in state.automation[helpers.urlId].actions"
                             ng-click="automation.initializeProperty(['action', 'editAction'], $index, action.type.toString(), action.value)">
                            <div ng-switch="action.type">
                                <div ng-switch-when="light" class="automation_tca_list">
                                    <img src="./css/images/icons/transparent-light-icon-40.png" class="light_group_img icon_40px"
                                         hueper-color="action.value.state" style="border-radius: 40px; padding:0px">
                                    <div style="display: inline-block; margin-top: 10px">{{sharedScope.state.lights[action.value.id].name}}
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="all" class="automation_tca_list">
                                    <div class="automation_state_icon" hueper-color="action.value.state"></div>
                                    <div style="display: inline-block; margin-top: 10px">All Lights
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.</div>
                                    </div>
                                </div>
                                <div ng-switch-when="group" class="automation_tca_list">
                                    <img src="./css/images/icons/transparent-group-icon-40.png" class="light_group_img icon_40px"
                                         hueper-color="action.value.state" style="border-radius: 40px; padding:0px">
                                    <div style="display: inline-block; margin-top: 10px">{{sharedScope.state.groups[action.value.id].name}}
                                        <div ng-if="action.delay > 0" style="display: inline-block">&nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.</div>
                                    </div>
                                </div>
                                <div ng-switch-when="scene" class="automation_tca_list">
                                    <div class="scene_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        {{sharedScope.state.scenes[action.value.id].name}}
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="party" class="automation_tca_list">
                                    <div class="party_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        {{sharedScope.state.party[action.value].name}}
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="automation" class="automation_tca_list">
                                    <div class="automation_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        {{sharedScope.state.automation[action.value.id].name}}
                                        <div ng-if="action.value.active === true" style="display: inline-block">
                                            &nbsp;is&nbsp;&nbsp;Active
                                        </div>
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="custom" class="automation_tca_list">
                                    <div class="custom_icon icon_40px icon_left"></div>
                                    <img src="./css/images/icons/custom-icon.svg" class="light_group_img icon_40px">
                                    <div class="panel panel_layout_fix">
                                        Command&nbsp;&nbsp;&nbsp;"{{action.value}}"
                                        <div ng-if="action.delay > 0" style="display: inline-block">
                                            &nbsp;&nbsp;&nbsp;Delay of&nbsp;{{action.delay}} sec.
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="cancelDelay" class="automation_tca_list">
                                    <div class="cancelDelay_icon icon_40px icon_left"></div>
                                    <div class="panel panel_layout_fix">
                                        No Delays.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>






            <div class="subcontent_c">
                <!------------------------------------ SUBMENU: create, edit trigger ---------------------------------->
                <div ng-if="sharedScope.submenu.visible.trigger" id="trigger">
                    <!-- DESKTOP/tablet view -->
                    <div class="lightgroup-all-container transparent_bg mobile_hide" style="margin-top: 0px">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline
                        light_group_a delete listing_box_icon" ng-click="sharedScope.submenu.closeSubmenu()"></span>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.createTrigger">Create Trigger</h2>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.editTrigger">Edit Trigger</h2>

                        <div class="automation_text">Type</div>
                        <div class="automation_field">
                            <select ng-model="automation.selectedProperty.type" ng-change="automation.resetTriggerValue(automation.selectedProperty)">
                                <option value="light">Light</option>
                                <option value="motion">Motion</option>
                                <option value="speech">Speech</option>
                                <option value="schedule">Alarm</option>
                                <option value="periodical">Periodical</option>
                                <option value="rfid">RFID</option>
                                <option value="device">Network Device</option>
                                <option value="custom">Personal Instruction</option>
                            </select>
                        </div>

                        <div style="width:100%; text-align: center; margin:auto; overflow:hidden">
                            <div ng-switch="automation.selectedProperty.type">
                                <div ng-switch-when="light">
                                    <div class="automation_text" style="margin-top: 77px">Threshold</div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> > </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> < </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Threshold (0-100)" />
                                    </div>
                                </div>
                                <!-- motion does not have a value -->
                                <div ng-switch-when="speech">
                                    <div class="automation_text">Command</div>
                                    <div class="automation_field">
                                        <input type="text" ng-model="automation.selectedProperty.value" placeholder="Speech Command" />
                                    </div>
                                </div>
                                <div ng-switch-when="schedule">
                                    <div class="automation_text" style="margin-top: 15px">Hour
                                        <div style="margin-top:27px">Minute</div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Hour" />
                                        <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                                    </div>
                                </div>
                                <div ng-switch-when="periodical">
                                    <div class="automation_text">Minutes</div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value" placeholder="Minutes" />
                                    </div>
                                </div>
                                <div ng-switch-when="rfid">
                                    <div class="automation_field">
                                        <select ng-model="automation.selectedProperty.value" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                                    </div>
                                </div>
                                <div ng-switch-when="device">
                                    <div class="automation_text" style="margin-top: 77px">
                                        Device
                                    </div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.action = 'login'">
                                                <input type="radio" value="login" ng-model="automation.selectedProperty.value.action" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 16px"> Login </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.action = 'logout'">
                                                <input type="radio" value="logout" ng-model="automation.selectedProperty.value.action" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 16px"> Logout </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                                    </div>
                                </div>
                                <div ng-switch-when="custom">
                                    <div class="automation_text">Your Command</div>
                                    <div class="automation_field">
                                        <input type="text" ng-model="automation.selectedProperty.value" placeholder="Your Command" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="width:100%">
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.createTrigger(automation.selectedProperty)"
                                    ng-if="sharedScope.submenu.visible.createTrigger">Save</button>
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.updateTrigger()" ng-if="sharedScope.submenu.visible.editTrigger">Save</button>
                            <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.removeTrigger()" ng-if="sharedScope.submenu.visible.editTrigger">Delete</button>
                        </div>
                    </div>

                    <!-- MOBILE  -------------------------------------------------------------------------------------->
                    <div class="overlap mobile_show" ng-click="sharedScope.submenu.closeSubmenu()"></div>
                    <div class="overlap_content mobile_show">
                        <div class="overlap_arrow_down" ng-click="sharedScope.submenu.closeSubmenu()">
                            <img src="css/images/icons/icon-arrow-down.png">
                        </div>
                        <div style="text-align: center; color: #f9efed" ng-if="sharedScope.submenu.visible.createTrigger">Create Trigger</div>
                        <div style="text-align: center; color: #f9efed" ng-if="sharedScope.submenu.visible.editTrigger">Edit Trigger</div>

                        <div style="padding:20px; text-align: center; margin:auto">
                            <div class="automation_text">Type</div>
                            <div class="automation_field">
                                <select ng-model="automation.selectedProperty.type" ng-change="automation.resetTriggerValue(automation.selectedProperty)">
                                    <option value="light">Light</option>
                                    <option value="motion">Motion</option>
                                    <option value="speech">Speech</option>
                                    <option value="schedule">Alarm</option>
                                    <option value="periodical">Periodical</option>
                                    <option value="rfid">RFID</option>
                                    <option value="device">Network Device</option>
                                    <option value="custom">Personal Instruction</option>
                                </select>
                            </div>

                            <div style="width:100%; text-align: center; margin:auto; overflow:hidden">
                                <div ng-switch="automation.selectedProperty.type">
                                    <div ng-switch-when="light">
                                        <div class="automation_text" style="margin-top: 77px">Threshold</div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'" >
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> > </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> < </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Threshold (0-100)" />
                                        </div>
                                    </div>
                                    <!-- motion does not have a value -->
                                    <div ng-switch-when="speech">
                                        <div class="automation_text">Command</div>
                                        <div class="automation_field">
                                            <input type="text" ng-model="automation.selectedProperty.value" placeholder="Speech Command" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="schedule">
                                        <div class="automation_text" style="margin-top: 15px">Hour
                                            <div style="margin-top:27px">Minute</div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Hour" />
                                            <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="periodical">
                                        <div class="automation_text">Minutes</div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value" placeholder="Minutes" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="rfid">
                                        <div class="automation_field">
                                            <select ng-model="automation.selectedProperty.value" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                                        </div>
                                    </div>
                                    <div ng-switch-when="device">
                                        <div class="automation_text" style="margin-top: 77px">
                                            Device
                                        </div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.action = 'login'" >
                                                    <input type="radio" value="login" ng-model="automation.selectedProperty.value.action" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 16px"> Login </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.action = 'logout'">
                                                    <input type="radio" value="logout" ng-model="automation.selectedProperty.value.action" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 16px"> Logout </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                                        </div>
                                    </div>
                                    <div ng-switch-when="custom">
                                        <div class="automation_text">Your Command</div>
                                        <div class="automation_field">
                                            <input type="text" ng-model="automation.selectedProperty.value" placeholder="Your Command" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div style="width:100%">
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.createTrigger(automation.selectedProperty)"
                                        ng-if="sharedScope.submenu.visible.createTrigger">Save</button>
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.updateTrigger()" ng-if="sharedScope.submenu.visible.editTrigger">Save</button>
                                <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.removeTrigger()" ng-if="sharedScope.submenu.visible.editTrigger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!------------------------------------ SUBMENU: create, edit conditions ------------------------------->
                <div ng-if="sharedScope.submenu.visible.condition" id ="condition">
                    <!-- DESKTOP/tablet view -->
                    <div class="lightgroup-all-container transparent_bg mobile_hide" style="margin-top: 0px">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext
                            ui-btn-inline light_group_a listing_box_icon" ng-click="sharedScope.submenu.closeSubmenu()">
                        </span>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.createCondition">Create Condition</h2>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.editCondition">Edit Condition</h2>
                        <div class="automation_text">Type</div>
                        <div class="automation_field">
                            <select ng-model="automation.selectedProperty.type" ng-change="automation.resetConditionValue(automation.selectedProperty)">
                                <option value="light">Light</option>
                                <option value="motion">Motion</option>
                                <option value="time">Space of Time</option>
                                <option value="weekdays">Weekdays</option>
                                <option value="connections">Connections</option>
                                <option value="rfid">RFID</option>
                                <option value="device">Network Device</option>
                                <option value="state">Color State</option>
                                <option value="party">Party Mode</option>
                            </select>
                        </div>

                        <div style="width:100%; text-align: center; margin:auto; overflow:hidden">
                            <div ng-switch="automation.selectedProperty.type">
                                <div ng-switch-when="light">
                                    <div class="automation_text" style="margin-top: 77px">Threshold</div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> > </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> < </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Threshold (0-100)" />
                                    </div>
                                </div>
                                <div ng-switch-when="motion">
                                    <div class="automation_text" style="font-size: 16px;margin-top: 67px">Seconds since <br /> last Registration</div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> > </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> < </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Seconds" />
                                    </div>
                                </div>
                                <div ng-switch-when="time">
                                    <div class="automation_text" style="margin-top: 77px">Hour
                                        <div style="margin-top:27px">Minute</div>
                                    </div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 16px"> After </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 16px"> Before </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Hour" />
                                        <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                                    </div>
                                </div>
                                <div ng-switch-when="weekdays">
                                    <span ng-repeat="(id, day) in {1: 'Monday', 2: 'Tuesday', 3: 'Wednesday', 4: 'Thursday', 5: 'Friday', 6: 'Saturday', 0: 'Sunday'}">
                                        <div hueper-checkbox="id" list="automation.selectedPropertyIsArray.array" style="margin-top:10px"> {{day}}</div>
                                    </span>
                                </div>
                                <div ng-switch-when="connections">
                                    <div hueper-checkbox="automation.selectedProperty.value">Connections Available</div>
                                </div>
                                <div ng-switch-when="rfid">
                                    <div class="automation_text">RFID
                                        <div style="margin-top:100px">Seconds</div>
                                    </div>
                                    <div class="automation_field">
                                        <select ng-model="automation.selectedProperty.value.id" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                                    </div>
                                    <div class="automation_field">
                                        <div class="relation_tablet_left">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> > </div>
                                            </div>
                                        </div>
                                        <div class="relation_tablet_right">
                                            <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                <div style="font-weight: bold; font-size: 28px"> < </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Seconds" />
                                    </div>
                                </div>
                                <div ng-switch-when="device">
                                    <div class="automation_text">Device</div>
                                    <div class="automation_field">
                                        <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                                    </div>
                                    <div class="automation_field" style="width:100%; margin-top: 15px">
                                        <div hueper-checkbox="automation.selectedProperty.value.active">Active</div>
                                        <div hueper-checkbox="sharedScope.submenu.visible.deviceAlternative" style="margin-top: 10px">Alternative</div>
                                    </div>
                                    <div ng-if="sharedScope.submenu.visible.deviceAlternative">

                                        <div class="automation_text" style="margin-top: 15px; font-size: 20px;">
                                            Alternative
                                            <div style="font-size: 16px; margin-top: 25px">Minutes since<br />last Usage</div>
                                        </div>
                                        <div class="automation_field">
                                            <div class="relation_tablet_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> > </div>
                                                </div>
                                            </div>
                                            <div class="relation_tablet_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> < </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Minutes" />
                                        </div>
                                    </div>
                                </div>
                                <div ng-switch-when="state">
                                    <select ng-model="automation.selectedProperty.value.type">
                                        <option>light</option>
                                        <option>all</option>
                                        <option>active</option>
                                        <option>group</option>
                                        <option>scene</option>
                                    </select>

                                    <div ng-switch="automation.selectedProperty.value.type">
                                        <div ng-switch-when="light">
                                            <select ng-model="automation.selectedProperty.value.id"
                                                    ng-options="id as l.name for (id , l) in state.lights"></select>
                                        </div>
                                        <div ng-switch-when="group">
                                            <select ng-model="automation.selectedProperty.value.id"
                                                    ng-options="id as g.name for (id , g) in state.groups"></select>
                                        </div>
                                        <div ng-switch-when="scene">
                                            <select ng-model="automation.selectedProperty.value.id"
                                                    ng-options="id as s.name for (id , s) in state.scenes"></select>
                                        </div>
                                    </div>
                                    <div ng-if="(automation.selectedProperty.value.type != 'scene') && (automation.selectedProperty.value.type != undefined) ">
                                        <div hueper-checkbox="automation.selectedProperty.value.state.on" style="margin-top:5px">On</div>

                                        <div hueper-slider model="automation.selectedProperty.value.state.bri" min="0" max="254"
                                             step="5" change="automation.selectedProperty.value.state(helpers.urlId, { bri: value })"
                                             class="slider-brightness" style="margin-top:5px"></div>
                                        <div hueper-colorpicker state="automation.selectedProperty.value.state"
                                             change="lights.state(helpers.urlId, state)"  clean="true" style="margin-top:5px"></div>
                                        <div hueper-checkbox="automation.selectedProperty.value.state.effect" trueval="colorloop"
                                             falseval="none" change="lights.state(helpers.urlId, {effect : value})" style="margin-top:5px"> Activate Colorloop</div>
                                    </div>
                                    <br />

                                    <div hueper-checkbox="automation.selectedProperty.value.invert">invert</div>

                                </div>
                                <div ng-switch-when="party">
                                    <select ng-model="automation.selectedProperty.value.id" ng-options="id as p.name for (id , p) in state.party">
                                        <option value="">[no party-mode activated]</option>
                                    </select>
                                    <br />
                                    <div hueper-checkbox="automation.selectedProperty.value.invert">invert</div>
                                </div>
                            </div>
                        </div>
                        <div style="width:100%">
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.createCondition(automation.selectedProperty, automation.selectedPropertyIsArray)"
                                    ng-if="sharedScope.submenu.visible.createCondition">Save</button>
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline
                                transparent_bg button" ng-click="automation.updateCondition()"
                                    ng-if="sharedScope.submenu.visible.editCondition">Save</button>
                            <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline
                                transparent_bg button" ng-click="automation.removeCondition()"
                                    ng-if="sharedScope.submenu.visible.editCondition">Delete</button>
                        </div>
                    </div>

                    <!-- MOBILE  -------------------------------------------------------------------------------------->
                    <div class="overlap mobile_show" ng-click="sharedScope.submenu.closeSubmenu()"></div>
                    <div class="overlap_content mobile_show">
                        <div class="overlap_arrow_down" ng-click="sharedScope.submenu.closeSubmenu()">
                            <img src="css/images/icons/icon-arrow-down.png">
                        </div>
                        <div class="listing_box_title_overlay" ng-if="sharedScope.submenu.visible.createCondition">Create Condition</div>
                        <div class="listing_box_title_overlay" ng-if="sharedScope.submenu.visible.editCondition">Edit Condition</div>
                        <div style="padding:20px; text-align: center; margin:auto">
                            <div class="automation_text">Type</div>
                            <div class="automation_field">
                                <select ng-model="automation.selectedProperty.type" ng-change="automation.resetConditionValue(automation.selectedProperty)">
                                    <option value="light">Light</option>
                                    <option value="motion">Motion</option>
                                    <option value="time">Space of Time</option>
                                    <option value="weekdays">Weekdays</option>
                                    <option value="connections">Connections</option>
                                    <option value="rfid">RFID</option>
                                    <option value="device">Network Device</option>
                                    <option value="state">Color State</option>
                                    <option value="party">Party Mode</option>
                                </select>
                            </div>

                            <div style="width:100%; text-align: center; margin:auto; overflow:hidden">
                                <div ng-switch="automation.selectedProperty.type">
                                    <div ng-switch-when="light">
                                        <div class="automation_text" style="margin-top: 77px">Threshold</div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> > </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> < </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Threshold (0-100)" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="motion">
                                        <div class="automation_text" style="font-size: 16px;margin-top: 67px">Seconds since <br /> last Registration</div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> > </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> < </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Seconds" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="time">
                                        <div class="automation_text" style="margin-top: 77px">Hour
                                            <div style="margin-top:27px">Minute</div>
                                        </div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 16px"> After </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 16px"> Before </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Hour" />
                                            <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="weekdays">
                                    <span ng-repeat="(id, day) in {1: 'Montag', 2: 'Dienstag', 3: 'Mittwoch', 4: 'Donnerstag', 5: 'Freitag', 6: 'Samstag', 0: 'Sonntag'}">
                                        <div hueper-checkbox="id" list="automation.selectedPropertyIsArray.array" style="margin-top:10px"> {{day}}</div>
                                    </span>
                                    </div>
                                    <div ng-switch-when="connections">
                                        <div hueper-checkbox="automation.selectedProperty.value">Connections Available</div>
                                    </div>
                                    <div ng-switch-when="rfid">
                                        <div class="automation_text">RFID
                                            <div style="margin-top:100px">Seconds</div>
                                        </div>
                                        <div class="automation_field">
                                            <select ng-model="automation.selectedProperty.value.id" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                                        </div>
                                        <div class="automation_field">
                                            <div class="relation_mobile_left">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                    <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> > </div>
                                                </div>
                                            </div>
                                            <div class="relation_mobile_right">
                                                <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                    <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                    <div style="font-weight: bold; font-size: 28px"> < </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="automation_field">
                                            <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Seconds" />
                                        </div>
                                    </div>
                                    <div ng-switch-when="device">
                                        <div class="automation_text">Device</div>
                                        <div class="automation_field">
                                            <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                                        </div>
                                        <div class="automation_field" style="width:100%; margin-top: 15px">
                                            <div hueper-checkbox="automation.selectedProperty.value.active">Active</div>
                                            <div hueper-checkbox="sharedScope.submenu.visible.deviceAlternative" style="margin-top: 10px">Alternative</div>
                                        </div>
                                        <div ng-if="sharedScope.submenu.visible.deviceAlternative">

                                            <div class="automation_text" style="margin-top: 15px; font-size: 20px;">
                                                Alternative
                                                <div style="font-size: 16px; margin-top: 25px">Minutes since<br />last Usage</div>
                                            </div>
                                            <div class="automation_field">
                                                <div class="relation_mobile_left">
                                                    <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '>'">
                                                        <input type="radio" value=">" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                        <div style="font-weight: bold; font-size: 28px"> > </div>
                                                    </div>
                                                </div>
                                                <div class="relation_mobile_right">
                                                    <div class="button transparent_bg radio_button" ng-click="automation.selectedProperty.value.relation = '<'">
                                                        <input type="radio" value="<" ng-model="automation.selectedProperty.value.relation" style="margin-top: 8px">
                                                        <div style="font-weight: bold; font-size: 28px"> < </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="automation_field">
                                                <input type="number" ng-model="automation.selectedProperty.value.time" placeholder="Minutes" />
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-switch-when="state">
                                        <select ng-model="automation.selectedProperty.value.type">
                                            <option>light</option>
                                            <option>all</option>
                                            <option>active</option>
                                            <option>group</option>
                                            <option>scene</option>
                                        </select>

                                        <div ng-switch="automation.selectedProperty.value.type">
                                            <div ng-switch-when="light">
                                                <select ng-model="automation.selectedProperty.value.id"
                                                        ng-options="id as l.name for (id , l) in state.lights"></select>
                                            </div>
                                            <div ng-switch-when="group">
                                                <select ng-model="automation.selectedProperty.value.id"
                                                        ng-options="id as g.name for (id , g) in state.groups"></select>
                                            </div>
                                            <div ng-switch-when="scene">
                                                <select ng-model="automation.selectedProperty.value.id"
                                                        ng-options="id as s.name for (id , s) in state.scenes"></select>
                                            </div>
                                        </div>
                                        <div ng-if="(automation.selectedProperty.value.type != 'scene') && (automation.selectedProperty.value.type != undefined) " class="automation_state_background">
                                            <div hueper-checkbox="automation.selectedProperty.value.state.on" style="margin-top:5px">On</div>

                                            <div hueper-slider model="automation.selectedProperty.value.state.bri" min="0" max="254"
                                                 step="5" change="automation.selectedProperty.value.state(helpers.urlId, { bri: value })"
                                                 class="slider-brightness" style="margin-top:5px"></div>
                                            <div hueper-colorpicker state="automation.selectedProperty.value.state"
                                                 change="lights.state(helpers.urlId, state)"  clean="true" style="margin-top:5px"></div>
                                            <div hueper-checkbox="automation.selectedProperty.value.state.effect" trueval="colorloop"
                                                 falseval="none" change="lights.state(helpers.urlId, {effect : value})" style="margin-top:5px"> Activate Colorloop</div>
                                        </div>
                                        <br />
                                        <div hueper-checkbox="automation.selectedProperty.value.invert">invert</div>
                                    </div>
                                    <div ng-switch-when="party">
                                        <select ng-model="automation.selectedProperty.value.id" ng-options="id as p.name for (id , p) in state.party">
                                            <option value="">[no party-mode activated]</option>
                                        </select>
                                        <br />
                                        <div hueper-checkbox="automation.selectedProperty.value.invert">invert</div>
                                    </div>
                                </div>
                            </div>

                            <div style="width:100%">
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.createCondition(automation.selectedProperty, automation.selectedPropertyIsArray)"
                                        ng-if="sharedScope.submenu.visible.createCondition">Save</button>
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline
                                transparent_bg button" ng-click="automation.updateCondition()"
                                        ng-if="sharedScope.submenu.visible.editCondition">Save</button>
                                <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline
                                transparent_bg button" ng-click="automation.removeCondition()"
                                        ng-if="sharedScope.submenu.visible.editCondition">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!------------------------------------ SUBMENU: create, edit actions ---------------------------------->
                <div ng-if="sharedScope.submenu.visible.action" id="action">
                    <!-- desktop/tablet view -->
                    <div class="lightgroup-all-container transparent_bg mobile_hide" style="margin-top: 0px">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext
                            ui-btn-inline light_group_a listing_box_icon" ng-click="sharedScope.submenu.closeSubmenu()">
                        </span>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.createAction">Create Action</h2>
                        <h2 class="listing_box_title" ng-if="sharedScope.submenu.visible.editAction">Edit Action</h2>
                        <div style="overflow: hidden">
                            <div class="automation_text">Type</div>
                            <div class="automation_field">
                                <select ng-model="automation.selectedProperty.type" ng-change="automation.resetActionValue(automation.selectedProperty)">
                                    <option value="light">Light</option>
                                    <option value="all">All Lights</option>
                                    <option value="group">Group</option>
                                    <option value="scene">Scene</option>
                                    <option value="party">Party</option>
                                    <option value="automation">Automation</option>
                                    <option value="custom">Personal Instruction</option>
                                    <option value="cancelDelay">Cancel Delay</option>
                                </select>
                            </div>
                        </div>

                        <div ng-switch="automation.selectedProperty.type" style="margin-bottom: 10px">
                            <div ng-switch-when="light">
                                <select ng-model="automation.selectedProperty.value.id" ng-options="id as l.name for (id , l) in state.lights"></select>
                            </div>
                            <div ng-switch-when="group">
                                <select ng-model="automation.selectedProperty.value.id" ng-options="id as g.name for (id , g) in state.groups"></select>
                            </div>
                            <div ng-switch-when="scene">
                                <select ng-model="automation.selectedProperty.value.id" ng-options="id as s.name for (id , s) in state.scenes"></select>
                                <div class="automation_text" style="margin-top: 10px">Transition in 100ms</div>
                                <div class="automation_field">
                                    <input type="number" ng-model="automation.selectedProperty.value.transition" placeholder="in 100ms"/>
                                </div>
                            </div>
                            <div ng-switch-when="party">
                                <select ng-model="automation.selectedProperty.value" ng-options="id as p.name for (id , p) in state.party">
                                    <option value="">[Party-Mode deactivated]</option>
                                </select>
                            </div>
                            <div ng-switch-when="automation">
                                <select ng-model="automation.selectedProperty.value.id" ng-options="id as am.name for (id , am) in state.automation"></select>
                                <br />
                                <div hueper-checkbox="automation.selectedProperty.value.active">Active</div>
                            </div>
                            <div ng-switch-when="custom">
                                <div class="automation_text">Command</div>
                                <div class="automation_field">
                                    <input type="text" ng-model="automation.selectedProperty.value" placeholder="Command" />
                                </div>
                            </div>
                        </div>

                        <div ng-if="((automation.selectedProperty.value.id != undefined) && (automation.selectedProperty.type != 'scene')
                            && (automation.selectedProperty.type != 'automation')) || (automation.selectedProperty.type === 'all')">
                            <div hueper-checkbox="automation.selectedProperty.value.state.on" style="margin-top:5px">On</div>
                            <div hueper-slider model="automation.selectedProperty.value.state.bri" min="0" max="254"
                                 step="5" change="automation.selectedProperty.value.state(helpers.urlId, { bri: value })"
                                 class="slider-brightness" style="margin-top:5px"></div>
                            <div hueper-colorpicker state="automation.selectedProperty.value.state"
                                 change="lights.state(helpers.urlId, state)"  clean="true" style="margin-top:5px"></div>
                            <div hueper-checkbox="automation.selectedProperty.value.state.effect" trueval="colorloop"
                                 falseval="none" change="lights.state(helpers.urlId, {effect : value})" style="margin-top:5px"> Activate Colorloop</div>
                        </div>

                        <br />

                        <div style="width:100%; overflow: hidden" ng-if="!(automation.selectedProperty.type === 'cancelDelay')">
                            <div class="automation_text" style="margin-top: 20px">Delay in sec.</div>
                            <div class="automation_field">
                                <input type="number" ng-model="automation.selectedProperty.delay" placeholder="Seconds"/>
                            </div>
                        </div>


                        <div style="width:100%">
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.createAction(automation.selectedProperty)" ng-if="sharedScope.submenu.visible.createAction">Save</button>
                            <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.updateAction()" ng-if="sharedScope.submenu.visible.editAction">Save</button>
                            <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                    ng-click="automation.removeAction()" ng-if="sharedScope.submenu.visible.editAction">Delete</button>
                        </div>
                    </div>

                    <!-- MOBILE  -------------------------------------------------------------------------------------->
                    <div class="overlap mobile_show" ng-click="sharedScope.submenu.closeSubmenu()"></div>
                    <div class="overlap_content mobile_show">
                        <div class="overlap_arrow_down" ng-click="sharedScope.submenu.closeSubmenu()">
                            <img src="css/images/icons/icon-arrow-down.png">
                        </div>
                        <div class="listing_box_title_overlay" ng-if="sharedScope.submenu.visible.createAction">Create Action</div>
                        <div class="listing_box_title_overlay" ng-if="sharedScope.submenu.visible.editAction">Edit Action</div>

                        <div style="padding:20px; text-align: center; margin:auto">
                            <div style="overflow: hidden">
                                <div class="automation_text">Type</div>
                                <div class="automation_field">
                                    <select ng-model="automation.selectedProperty.type" ng-change="automation.resetActionValue(automation.selectedProperty)">
                                        <option value="light">Light</option>
                                        <option value="all">All Lights</option>
                                        <option value="group">Group</option>
                                        <option value="scene">Scene</option>
                                        <option value="party">Party</option>
                                        <option value="automation">Automation</option>
                                        <option value="custom">Personal Instruction</option>
                                        <option value="cancelDelay">Cancel Delay</option>
                                    </select>
                                </div>
                            </div>

                            <div ng-switch="automation.selectedProperty.type" style="margin-bottom: 10px">
                                <div ng-switch-when="light">
                                    <select ng-model="automation.selectedProperty.value.id" ng-options="id as l.name for (id , l) in state.lights"></select>
                                </div>
                                <div ng-switch-when="group">
                                    <select ng-model="automation.selectedProperty.value.id" ng-options="id as g.name for (id , g) in state.groups"></select>
                                </div>
                                <div ng-switch-when="scene">
                                    <select ng-model="automation.selectedProperty.value.id" ng-options="id as s.name for (id , s) in state.scenes"></select>
                                    <div class="automation_text" style="margin-top: 10px">Transition in 100ms</div>
                                    <div class="automation_field">
                                        <input type="number" ng-model="automation.selectedProperty.value.transition" placeholder="in 100ms"/>
                                    </div>
                                </div>
                                <div ng-switch-when="party">
                                    <select ng-model="automation.selectedProperty.value" ng-options="id as p.name for (id , p) in state.party">
                                        <option value="">[Party-Mode deactivated]</option>
                                    </select>
                                </div>
                                <div ng-switch-when="automation">
                                    <select ng-model="automation.selectedProperty.value.id" ng-options="id as am.name for (id , am) in state.automation"></select>
                                    <br />
                                    <div hueper-checkbox="automation.selectedProperty.value.active">Active</div>
                                </div>
                                <div ng-switch-when="custom">
                                    <div class="automation_text">Command</div>
                                    <div class="automation_field">
                                        <input type="text" ng-model="automation.selectedProperty.value" placeholder="Command" />
                                    </div>
                                </div>
                            </div>
                            <div ng-if="((automation.selectedProperty.value.id != undefined) && (automation.selectedProperty.type != 'scene')
                            && (automation.selectedProperty.type != 'automation')) || (automation.selectedProperty.type === 'all')" class="automation_state_background">
                                <div hueper-checkbox="automation.selectedProperty.value.state.on" style="margin-top:5px">On</div>
                                <div hueper-slider model="automation.selectedProperty.value.state.bri" min="0" max="254"
                                     step="5" change="automation.selectedProperty.value.state(helpers.urlId, { bri: value })"
                                     class="slider-brightness" style="margin-top:5px"></div>
                                <div hueper-colorpicker state="automation.selectedProperty.value.state"
                                     change="lights.state(helpers.urlId, state)"  clean="true" style="margin-top:5px"></div>
                                <div hueper-checkbox="automation.selectedProperty.value.state.effect" trueval="colorloop"
                                     falseval="none" change="lights.state(helpers.urlId, {effect : value})" style="margin-top:5px"> Activate Colorloop</div>
                            </div>

                            <br />

                            <div style="width:100%; overflow: hidden" ng-if="!(automation.selectedProperty.type === 'cancelDelay')">
                                <div class="automation_text" style="margin-top: 20px">Delay in sec.</div>
                                <div class="automation_field">
                                    <input type="number" ng-model="automation.selectedProperty.delay" placeholder="Seconds"/>
                                </div>
                            </div>


                            <div style="width:100%">
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.createAction(automation.selectedProperty)" ng-if="sharedScope.submenu.visible.createAction">Save</button>
                                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.updateAction()" ng-if="sharedScope.submenu.visible.editAction">Save</button>
                                <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                        ng-click="automation.removeAction()" ng-if="sharedScope.submenu.visible.editAction">Delete</button>
                            </div>


                        </div>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>
</body>
</html>