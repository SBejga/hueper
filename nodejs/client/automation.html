<!DOCTYPE html>
<html lang="de" ng-app="hueApp">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SmartLights</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./css/redtheme.css"/>
    <link rel="stylesheet" href="./css/jquery.mobile.icons-1.4.0.css"/>
    <link rel="stylesheet" href="./css/jquery.mobile.structure-1.4.0.css"/>

    <link type="text/css" rel="stylesheet" href="./css/layout.css"/>

    <!-- JavaScript -->
    <script src="./js/scripts/jquery-1.10.2.js"></script>
    <script src="./js/scripts/jquery.mobile-1.4.0.js"></script>
    <script src="./js/scripts/angular-1.3.0-beta.js"></script>
    <script src="./js/scripts/angular-route.js"></script>
    <script src="./js/scripts/jqm-angular-adapter-modified.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <!-- Controller -->
    <script src="./js/app.js"></script>
    <script src="./js/controllers.js"></script>
    <script src="./js/filters.js"></script>
    <script src="./js/services.js"></script>
    <script src="./js/directives.js"></script>
    <script src="./js/controllers/lightandgroupctrl.js"></script>
    <script src="./js/controllers/partyctrl.js"></script>
    <script src="./js/controllers/scenectrl.js"></script>
    <script src="./js/controllers/speechctrl.js"></script>
    <script src="./js/controllers/automationctrl.js"></script>


    <!-- Favicon and Touch-Icons -->
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="apple-touch-icon-precomposed" sizes="152x152"
          href="css/images/touch/152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120"
          href="css/images/touch/120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76"
          href="css/images/touch/76.png" />
    <link rel="apple-touch-icon-precomposed"
          href="css/images/touch/57.png" />

    <meta name="msapplication-TileImage"
          content="css/images/touch/256.png" />
    <meta name="msapplication-TileColor" content="#141414" />

</head>
<body>

<div data-role="page" ngm-shared-controller="sharedScope:MainCtrl"  class="background_stars" data-theme="b">
    <!-- HEADER -->
    <div data-role="header" class="header">
        <div class="header_container tablet_hide">
            <img src="./css/images/icons/icon-menu-logout.png" class="header_left_icon" ng-click="sharedScope.user.logout()"
                 ng-show="sharedScope.state.user.loginRequired">
            <h1 class="ui-title">Smart Lights</h1>
        </div>
        <!---------------------------------------- MOBILE MENU -------------------------------------------------------->
        <div class="tablet_show mobile_menu_wrapper">
            <a href="lightandgroup.html" class="smallmenu_wrapper">
                <div class="smallmenu_icon">
                    <img src="./css/images/icons/icon-light-40.png">
                </div>
            </a>
            <a href="scenes.html" class="smallmenu_wrapper">
                <div class="smallmenu_icon">
                    <img src="./css/images/icons/icon-scene-40.png">
                </div>
            </a>
            <a href="automationoverview.html" class="smallmenu_wrapper">
                <div class="smallmenu_icon">
                    <img src="./css/images/icons/icon-automation-dark-40.png">
                </div>
            </a>
            <a href="party.html" class="smallmenu_wrapper">
                <div class="smallmenu_icon">
                    <img src="./css/images/icons/icon-party-40.png">
                </div>
            </a>
            <a href="settings.html" class="smallmenu_wrapper">
                <div class="smallmenu_icon">
                    <img src="./css/images/icons/icon-settings-40.png">
                </div>
            </a>
        </div>
    </div>

    <!-- CONTENT -->
    <div data-role="content" ng-controller="AutomationCtrl" class="content_container">
        <!---------------------------------------- DESKTOP MENU ------------------------------------------------------->
        <div class="content_left_subcontainer tablet_hide">
            <a href="lightandgroup.html" class="ui-btn main_menu_transparent_bg button" style="margin-top: 0px">
                <img src="./css/images/icons/icon-light-40.png" class="light_group_img no_padding">
                <div class="main_menu_text panel">
                    Lights & Groups
                </div>
            </a>
            <a href="scenes.html" class="ui-btn main_menu_transparent_bg button">
                <img src="./css/images/icons/icon-scene-40.png" class="light_group_img no_padding">
                <div class="main_menu_text panel">
                    Scenes
                </div>
            </a>
            <a href="automationoverview.html" class="ui-btn main_menu_transparent_bg button checked_menubox">
                <img src="./css/images/icons/icon-automation-40.png" class="light_group_img no_padding">
                <div class="main_menu_text panel">
                    Automation
                </div>
            </a>
            <a href="party.html" class="ui-btn main_menu_transparent_bg button">
                <img src="./css/images/icons/icon-party-40.png" class="light_group_img no_padding">
                <div class="main_menu_text panel">
                    Party
                </div>
            </a>
            <a href="account.html" class="ui-btn main_menu_transparent_bg button">
                <img src="./css/images/icons/icon-settings-40.png" class="light_group_img no_padding">
                <div class="main_menu_text panel">
                    Settings
                </div>
            </a>
        </div>

        <!---------------------------------------- NOTIFICATIONS Desktop ------------------------------------------>
        <div class="notification" ng-if="sharedScope.submenu.visible.notification"
             ng-click="sharedScope.submenu.closeSubmenu()">
            <img src="css/images/icons/icon-warning.png" class="header_left_icon">
            Notification Template
        </div>



        <div class="content_right_subcontainer" style="text-align: center; margin: auto; overflow:hidden">

            <div class="subcontent_a">
                <!---------------------------------------- NAME ------------------------------------------------------->
                <div class="lightgroup_name_edit" ng-if="state.automation[helpers.urlId].name.length">
                    <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-edit ui-btn-icon-notext ui-btn-inline"
                          ng-click="automation.update(state.automation[helpers.urlId])"></span>
                </div>
                <div class="lightgroup_name_input"><input type="text" ng-model="state.automation[helpers.urlId].name"></div>



                <!---------------------------------------- CHECKBOX MENU ---------------------------------------------->
                <div style="width:100%; height:30px;">
                    <div class="checkbox_container vertical_checkbox_list" style="float:left" ng-click="automation.toggleActive(helpers.urlId)">
                        <div class="checkbox_box">
                            <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].active">
                        </div>
                        <div style="margin-left: 30px">
                            Active
                        </div>
                    </div>
                    <div class="checkbox_container vertical_checkbox_list" style="float:right; min-width:220px !important;" ng-click="automation.toggleAllConditionsNeeded(helpers.urlId)">
                        <div class="checkbox_box">
                            <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].allConditionsNeeded">
                        </div>
                        <div style="margin-left: 30px">
                            All Conditions Needed
                        </div>
                    </div>
                    <div class="checkbox_container vertical_checkbox_list" style="text-align: center; margin: auto" ng-click="automation.toggleSingle(helpers.urlId)">
                        <div class="checkbox_box">
                            <img src="./css/images/checkbox-true.png" style="float: left" ng-show="state.automation[helpers.urlId].single">
                        </div>
                        <div style="margin-left: 30px">
                            Single Use
                        </div>
                    </div>
                </div>
            </div>



            <!---------------------------------------- TRIGGER, CONDITIONS, ACTIONS LIST ------------------------------>
            <div class="subcontent_b">
                <div class="transparent_bg listing_box" style="overflow: hidden">
                    <!-- trigger -->
                    <div style="width:100%; overflow:hidden">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon" ng-click="sharedScope.submenu.openSubmenu('editTrigger')"></span>
                        <h2 class="listing_box_title">Trigger</h2>
                        <div ng-repeat="trigger in state.automation[helpers.urlId].triggers" ng-click="sharedScope.submenu.openSubmenu('editTrigger');
                            automation.setSelectedProperty({'type': trigger.type.toString(), 'value' : trigger.value})">
                            <img src="./css/images/icons/trigger-40.png" class="light_group_img" style="margin:5px">
                        </div>
                    </div>








                    <!-- conditions -->
                    <div style="width:100%; overflow:hidden">
                         <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon" ng-click="sharedScope.submenu.openSubmenu('editCondition')"></span>
                        <h2 class="listing_box_title">Conditions</h2>
                        <div ng-repeat="condition in state.automation[helpers.urlId].conditions" ng-click="sharedScope.submenu.openSubmenu('editCondition');">
                            <img src="./css/images/icons/trigger-40.png" class="light_group_img" style="margin:5px">
                        </div>
                    </div>

                    <!-- actions -->
                    <div style="width:100%; overflow:hidden">
                         <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline
                            light_group_a listing_box_icon" ng-click="sharedScope.submenu.openSubmenu('editAction')"></span>
                        <h2 class="listing_box_title">Actions</h2>
                        <div ng-repeat="action in state.automation[helpers.urlId].actions" ng-click="sharedScope.submenu.openSubmenu('editAction');">
                            <img src="./css/images/icons/trigger-40.png" class="light_group_img" style="margin:5px">
                        </div>
                    </div>
                </div>
            </div>






            <div class="subcontent_c">
                <div ng-if="sharedScope.submenu.visible.editTrigger">
                    <!-- desktop/tablet view -->
                    <div class="lightgroup-all-container transparent_bg mobile_hide">
                        <span class="ui-nodisc-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline
                        light_group_a listing_box_icon" ng-click="sharedScope.submenu.closeSubmenu()"></span>
                        <h2 class="listing_box_title">Edit Trigger</h2>

                        Typ:
                        <select ng-model="automation.selectedProperty.type" ng-change="automation.resetTriggerValue(automation.selectedProperty)">
                            <option>light</option>
                            <option>motion</option>
                            <option>speech</option>
                            <option>schedule</option>
                            <option>periodical</option>
                            <option>rfid</option>
                            <option>device</option>
                            <option>custom</option>
                        </select>
                        <div ng-switch="automation.selectedProperty.type">
                            <div ng-switch-when="light">
                                <select ng-model="automation.selectedProperty.value.relation">
                                    <option>&lt;</option>
                                    <option>&gt;</option>
                                </select>
                                <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Schwelle (0-100)" />
                            </div>
                            <!-- motion does not have a value -->
                            <div ng-switch-when="speech">
                                <input type="text" ng-model="automation.selectedProperty.value" placeholder="Sprachbefehl" />
                            </div>
                            <div ng-switch-when="schedule">
                                <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Stunde" />
                                <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                            </div>
                            <div ng-switch-when="periodical">
                                <input type="number" ng-model="automation.selectedProperty.value" placeholder="Minuten" />
                            </div>
                            <div ng-switch-when="rfid">
                                <select ng-model="automation.selectedProperty.value" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                            </div>
                            <div ng-switch-when="device">
                                <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                                <select ng-model="automation.selectedProperty.value.action">
                                    <option>login</option>
                                    <option>logout</option>
                                </select>
                            </div>
                            <div ng-switch-when="custom">
                                <input type="text" ng-model="automation.selectedProperty.value" placeholder="Eigenes Kommando" />
                            </div>
                        </div>
                        <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                ng-click="automation.update(automation.selectedProperty);sharedScope.submenu.closeSubmenu()">Save</button>
                        <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline transparent_bg button"
                                ng-click="sharedScope.submenu.closeSubmenu()">Delete</button>
                    </div>
                </div>


                <div ng-if="sharedScope.submenu.visible.editCondition">

                </div>
            </div>
            <!-- mobile view -->
            <div class="overlap mobile_show" ng-click="sharedScope.submenu.closeSubmenu()"></div>
            <div class="overlap_content mobile_show">
                <div class="overlap_arrow_down" ng-click="sharedScope.submenu.closeSubmenu()">
                    <a href="automation.html"><img src="css/images/icons/icon-arrow-down.png"></a>
                </div>
                Typ:
                <select ng-model="automation.selectedProperty.type" ng-change="automation.resetTriggerValue(automation.selectedProperty)">
                    <option>light</option>
                    <option>motion</option>
                    <option>speech</option>
                    <option>schedule</option>
                    <option>periodical</option>
                    <option>rfid</option>
                    <option>device</option>
                    <option>custom</option>
                </select>
                <div ng-switch="automation.selectedProperty.type">
                    <div ng-switch-when="light">
                        <select ng-model="automation.selectedProperty.value.relation">
                            <option>&lt;</option>
                            <option>&gt;</option>
                        </select>
                        <input type="number" ng-model="automation.selectedProperty.value.threshold" placeholder="Schwelle (0-100)" />
                    </div>
                    <!-- motion does not have a value -->
                    <div ng-switch-when="speech">
                        <input type="text" ng-model="automation.selectedProperty.value" placeholder="Sprachbefehl" />
                    </div>
                    <div ng-switch-when="schedule">
                        <input type="number" ng-model="automation.selectedProperty.value.hour" placeholder="Stunde" />
                        <input type="number" ng-model="automation.selectedProperty.value.minute" placeholder="Minute" />
                    </div>
                    <div ng-switch-when="periodical">
                        <input type="number" ng-model="automation.selectedProperty.value" placeholder="Minuten" />
                    </div>
                    <div ng-switch-when="rfid">
                        <select ng-model="automation.selectedProperty.value" ng-options="tag.tag as tag.name for (id , tag) in state.rfid"></select>
                    </div>
                    <div ng-switch-when="device">
                        <select ng-model="automation.selectedProperty.value.address" ng-options="device.address as device.name for (id , device) in state.devices"></select>
                        <select ng-model="automation.selectedProperty.value.action">
                            <option>login</option>
                            <option>logout</option>
                        </select>
                    </div>
                    <div ng-switch-when="custom">
                        <input type="text" ng-model="automation.selectedProperty.value" placeholder="Eigenes Kommando" />
                    </div>
                </div>
                <button class="ui-btn ui-icon-check ui-btn-icon-left btn-round-corner ui-btn-inline button"
                        ng-click=";sharedScope.submenu.closeSubmenu()">Save</button>
                <button class="ui-btn ui-icon-delete ui-btn-icon-left btn-round-corner ui-btn-inline button"
                        ng-click="sharedScope.submenu.closeSubmenu()">Delete</button>
            </div>


            <div class="subcontent_d"></div>



        </div>
    </div>
</div>
</body>
</html>